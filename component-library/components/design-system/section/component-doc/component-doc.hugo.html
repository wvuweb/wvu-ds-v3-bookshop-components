<section class="py-6 audience-general tone-default bg-option-1 wvu-b-subtle">
  <div class="container">
    <div class="row gx-lg-6">
      <div class="col-lg-12 mb-5 mb-lg-0">
        {{ with .overview_markdown }}
          <h2 class="wvu-b-display-heading">Overview</h2>
          <p class="lead">{{ . | markdownify }}</p>
        {{ end }}
        {{ with .when_to_use_markdown }}
          <h2 class="wvu-b-display-heading mt-5">When to Use</h2>
          <p class="lead">{{ . | markdownify }}</p>
        {{ end }}
        {{ with .cloudcannon_templates }}
          <h2 class="wvu-b-display-heading mt-5">CloudCannon Templates</h2>
          <ul class="">
            {{ range . }}
              <li><a href="{{ .url }}">{{ .text }}</a></li>
            {{ end }}
          </ul>
        {{ end }}
        {{ with .in_the_wild }}
          <h2 class="wvu-b-display-heading mt-5">In the Wild</h2>
          <ul class="">
            {{ range . }}
              <li><a href="{{ .url }}">{{ .text }}</a></li>
            {{ end }}
          </ul>
        {{ end }}
      </div>
      <div class="col-lg-12">
        <h2 class="wvu-b-display-heading mb-4">Content Guidelines</h2>
        {{ $hasComponent := "" }}
        {{ $hasItems := "" }}

        {{ if .content_guidelines_component }}
          {{ $hasComponent = true }}
        {{ end }}
        {{ if .content_guidelines_items }}
          {{ $hasItems = true }}
        {{ end }}

        {{- if and (not site.Params.env_bookshop_live) -}}
          {{ with .content_guidelines_component }}          
            <table class="table caption-top mb-4">
              {{ if $hasComponent }}
                <caption class="h6 wvu-b-label text-uppercase">Component</caption>
              {{ end }}
              <thead>
                <tr class="config-bold">
                  <th class="w-25">Content</th>
                  <th class="w-50">Description</th>
                  <th class="w-25">Max Chars.</th>
                </tr>
              </thead>
              <tbody>
              
                {{ $required := "" }}

                {{ range . }}
                  {{ $required = "" }}
                  {{ if .required }}
                    {{ $required = true }}
                  {{ end }}

                  <tr>
                    <td>{{ .title }}{{ if $required }}<span class="text-danger">*</span>{{ end }}</td>
                    <td>{{ .description }}</td>
                    <td>{{ .max_chars }}</td>
                  </tr>

                {{ end }}
              </tbody>
            </table>
          {{ end }}

          {{ with .content_guidelines_items }}          
            <table class="table caption-top">
              {{ if $hasItems }}
                <caption class="h6 wvu-b-label text-uppercase">Items</caption>
              {{ end }}
              <thead>
                <tr class="config-bold">
                  <th class="w-25">Content</th>
                  <th class="w-50">Description</th>
                  <th class="w-50">Max Chars.</th>
                </tr>
              </thead>
              <tbody>
              
                {{ $required := "" }}

                {{ range . }}
                  {{ $required = "" }}
                  {{ if .required }}
                    {{ $required = true }}
                  {{ end }}

                  <tr>
                    <td>{{ .title }}{{ if $required }}<span class="text-danger">*</span>{{ end }}</td>
                    <td>{{ .description }}</td>
                    <td>{{ .max_chars }}</td>
                  </tr>

                {{ end }}
              </tbody>
            </table>
          {{ end }}
        {{ end }}
        <p class="small">*Required content.</p>
      </div>
    </div>
  </div>
</section>